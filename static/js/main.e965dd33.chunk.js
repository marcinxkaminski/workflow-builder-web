(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n(37)},36:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(7),o=Object(r.memo)(function(e){var t=function(e){var t=e.onClick,n=e.disabled,r={};return t&&(r.onClick=t),n&&(r.disabled=n),r}(e),n=e.shadow,r=e.customClasses,c=e.loading,o=e.icon;return a.a.createElement("button",Object.assign({},t,{className:"".concat("btn btn-outline-light btn-circle").concat(n?" shadow":"").concat(r?" "+r:"")}),c?a.a.createElement("div",{className:"loader spinner-border",role:"status"},a.a.createElement("span",{className:"sr-only"},"Loading...")):function(e){return a.a.createElement("i",{className:"material-icons"},e||"help")}(o))}),s=n(3),l=n(1),i=n.n(l),u=n(2),d="SUCCESS",m="ERROR",f="GET_AVAILABLE_WORKFLOW_ELEMENTS",v="GET_AVAILABLE_WORKFLOW_ELEMENTS_".concat(d),w="GET_AVAILABLE_WORKFLOW_ELEMENTS_".concat(m),p="GET_RESULTS_FOR_DATA",E="GET_RESULTS_FOR_DATA_".concat(d),h="GET_RESULTS_FOR_DATA_".concat(m),b="ADD_WORKFLOW_ELEMENT",g="DELETE_WORKFLOW_ELEMENT",O="SUBMIT_WORKFLOW",k="SUBMIT_WORKFLOW_".concat(d),j="SUBMIT_WORKFLOW_".concat(m),y=n(8);function N(e){return x.apply(this,arguments)}function x(){return(x=Object(u.a)(i.a.mark(function e(t){var n,r,a,c,o,s=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:{},r=s.length>2&&void 0!==s[2]?s[2]:{},a=s.length>3&&void 0!==s[3]?s[3]:"GET",c=s.length>4&&void 0!==s[4]?s[4]:{},e.next=6,fetch(t,Object(y.a)({mode:"cors"},n,{headers:Object(y.a)({"Content-Type":"application/json"},r),method:a,body:"GET"===a||"HEAD"===a?null:JSON.stringify(c)}));case 6:return o=e.sent,e.abrupt("return",o.ok?o.json():o.text());case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function W(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"".concat(e).concat(t).concat(n?"?".concat(new URLSearchParams(n).toString()):"/")}var _="http://localhost:8000/api/workflow-builder",S="/elements",C="/files",T={},L={};function A(e){return I.apply(this,arguments)}function I(){return(I=Object(u.a)(i.a.mark(function e(t){var n,r,a,c=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:null,r=c.length>2&&void 0!==c[2]?c[2]:T,a=c.length>3&&void 0!==c[3]?c[3]:L,e.abrupt("return",N(W(_,t,n),r,a,"GET"));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function R(e){return D.apply(this,arguments)}function D(){return(D=Object(u.a)(i.a.mark(function e(t){var n,r,a,c,o=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r=o.length>2&&void 0!==o[2]?o[2]:null,a=o.length>3&&void 0!==o[3]?o[3]:T,c=o.length>4&&void 0!==o[4]?o[4]:L,e.abrupt("return",N(W(_,t,r),a,c,"PUT",n));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function B(e){return F.apply(this,arguments)}function F(){return(F=Object(u.a)(i.a.mark(function e(t){var n,r,a,c,o=arguments;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},r=o.length>2&&void 0!==o[2]?o[2]:null,a=o.length>3&&void 0!==o[3]?o[3]:T,c=o.length>4&&void 0!==o[4]?o[4]:L,e.abrupt("return",N(W(_,t,r),a,c,"POST",n));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var G="PENDING",U="SUCCESS",V="ERROR";function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(){var r=Object(u.a)(i.a.mark(function r(a){var c;return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a({type:e,payload:{status:G}}),r.next=4,n?t(n):t();case 4:return c=r.sent,a({type:"".concat(e,"_").concat(d),payload:{status:U,data:c}}),r.abrupt("return",c);case 9:return r.prev=9,r.t0=r.catch(0),console.error(r.t0),a({type:"".concat(e,"_").concat(m),payload:{status:V,error:r.t0}}),r.abrupt("return",null);case 14:case"end":return r.stop()}},r,null,[[0,9]])}));return function(e){return r.apply(this,arguments)}}()}function M(e){return e.map(function(e){return{id:e.id}})}function K(e,t){try{var n=JSON.parse(e),r=Object.values(n).filter(function(e){return!e}).length;return!Object.keys(t.data).filter(function(e){return!Object.keys(n).includes(e)}).length&&!r}catch(a){return console.warn(a),!1}}function J(e){return{type:g,payload:e.index}}function P(e,t){return q(p,Object(u.a)(i.a.mark(function n(){var r,a;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=null,!(a=K(t,e.config))){n.next=6;break}return n.next=5,R(S,{id:e.id,data:JSON.parse(t)});case 5:r=n.sent;case 6:return n.abrupt("return",{index:e.index,result:r,isValid:a});case 7:case"end":return n.stop()}},n)})))}function H(){return function(){var e=Object(u.a)(i.a.mark(function e(t,n){var r,a,c,o,s,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n().workflowState,a=r.selectedWorkflowElements,c=void 0===a?[]:a,o=r.workflowId,s=o){e.next=7;break}return l=M(c),e.next=6,t(q(O,Object(u.a)(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(S,{elements:l});case 2:return t=e.sent,n=t.id,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}))));case 6:s=e.sent;case 7:d="".concat(_).concat(C,"?id=").concat(s),window.open(d,"_blank").focus();case 8:case"end":return e.stop()}var d},e)}));return function(t,n){return e.apply(this,arguments)}}()}var $=Object(r.memo)(function(e){var t,n,r,c,s=e.item,l=void 0===s?{}:s,i=e.customClasses,u=void 0===i?"":i,d=e.hideButtons,m=e.onAdd,f=e.onDelete,v=e.onChange;if(Object.keys(l).length)return a.a.createElement("div",{className:"card element-card shadow text-center m-2 ".concat(u)},a.a.createElement("div",{className:"card-body"},"undefined"!==typeof l.index?(c=l.index,a.a.createElement("div",{className:"row justify-content-center"},a.a.createElement("div",{className:"col text-center"},a.a.createElement("h6",null,"#".concat(c+1))))):null,l.name?(r=l.name,a.a.createElement("div",{className:"row justify-content-center"},a.a.createElement("div",{className:"col text-center"},a.a.createElement("h4",{className:"card-title"},r)))):null,l.materialIcon?(n=l.materialIcon,a.a.createElement("div",{className:"row justify-content-center my-2"},a.a.createElement("div",{className:"col text-center"},a.a.createElement("div",{className:"card-subtitle"},a.a.createElement("i",{className:"material-icons"},n))))):null,l.description?(t=l.description,a.a.createElement("div",{className:"row justify-content-center mb-3"},a.a.createElement("div",{className:"col text-center"},a.a.createElement("div",{className:"card-text"},a.a.createElement("small",{className:"text-muted"},t))))):null,!m||d||f?null:function(e){return a.a.createElement("div",{className:"row justify-content-center"},a.a.createElement("div",{className:"col text-center"},a.a.createElement(o,{icon:"add",customClasses:"btn-outline-dark mx-auto",shadow:!1,onClick:e})))}(m),!f||d||m?null:function(e){return a.a.createElement("div",{className:"row justify-content-center"},a.a.createElement("div",{className:"col text-center"},a.a.createElement(o,{icon:"clear",customClasses:"btn-outline-dark mx-auto",shadow:!1,onClick:e})))}(f)),Object.keys(l.config||{}).length&&v?function(e,t){return a.a.createElement("div",{className:"card-footer overflow-auto p-0 small font-weight-light"},a.a.createElement("textarea",{className:"smallest form-control".concat(!1===e.isValid?" is-invalid":""),defaultValue:JSON.stringify(e.data),onBlur:function(e){var n=e.target;return t(n.value)}}),a.a.createElement("small",{className:"text-muted small"},"Result:",a.a.createElement("br",null)," ",e.result?JSON.stringify(e.result):null))}(l.config,v):null);console.warn("Cannot render empty item ",l)}),z=Object(r.memo)(function(e){var t=e.items,n=e.onDelete,r=e.onConfigChange;return a.a.createElement("div",{className:"row w-100 mx-auto justify-content-center align-items-center my-5"},t.map(function(e,t){var c=function(e,t){return{id:e.id,name:e.name,config:e.config,index:t}}(e,t);return console.log(c),a.a.createElement($,{key:t,item:c,onDelete:function(){return n(c)},onChange:function(e){return r(c,e)}})}))}),Q=Object(r.memo)(Object(c.b)(function(e){return e.workflowState},function(e){return Object(s.b)({deleteWorkflowElement:J,submitWorkflow:H,onlineProcessing:P},e)})(function(e){var t=e.selectedWorkflowElements,n=e.deleteWorkflowElement,r=e.submitWorkflow,c=e.onlineProcessing;return a.a.createElement("div",{className:"container-fluid my-2"},a.a.createElement(z,{items:t,onDelete:n,onConfigChange:c}),a.a.createElement("div",{className:"row justify-content-center my-4"},a.a.createElement("div",{className:"col text-center mb-5"},a.a.createElement(o,{icon:"cloud_download",loading:e.request.status===G,customClasses:"mx-auto",onClick:r,shadow:!0}))))})),X=n(13),Y=n(20),Z=n(10),ee=n(17),te=n(21),ne=function(e){function t(){return Object(X.a)(this,t),Object(Y.a)(this,Object(Z.a)(t).apply(this,arguments))}return Object(ee.a)(t,e),t}(Object(te.a)(Error)),re=function e(t){var n=t.id,r=t.name,a=t.description,c=void 0===a?null:a,o=t.materialIcon,s=void 0===o?null:o,l=t.config,i=void 0===l?null:l;if(Object(X.a)(this,e),!n)throw new ne("Invalid workflow element's ID");if(!r)throw new ne("Invalid workflow element's name");this.id=n,this.name=r,this.description=c,this.materialIcon=s,this.config=i},ae=function(){var e=Object(u.a)(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(S);case 2:return t=e.sent,n=t.elements,e.abrupt("return",n.map(function(e){return new re(e)}));case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();function ce(){return q(f,ae)}function oe(e){return{type:b,payload:Object(y.a)({},e)}}var se=n(19),le=function(e){return{name:e.name,materialIcon:e.materialIcon,description:e.description}},ie=function(e,t,n){return e<t-1?e+1:n?(e+1)%t:e},ue=function(e,t,n){return e>0?e-1:n?t-1:e},de=Object(r.memo)(function(e){var t=Object(r.useState)(0),n=Object(se.a)(t,2),c=n[0],s=n[1],l=e.items,d=e.infinite,m=e.onAdd,f=e.itemsVisibleCount,v=function(){var e=Object(u.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s(ie(c,l.length,d));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:s(ue(c,l.length,d));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return a.a.createElement("div",{className:"container-fluid w-100"},a.a.createElement("div",{className:"row justify-content-between align-items-center"},a.a.createElement(o,{icon:"keyboard_arrow_left",onClick:w,shadow:!0}),function(){var e=f||1,t=l.length;if(1===e||e>t){var n=l[c];return a.a.createElement($,{item:le(n),onAdd:function(){return m(n)},customClasses:"mx-auto"})}if(e>1){for(var r=[ue(c,t,d)],o=0;o<e-1;++o)r.push(ie(r[r.length-1],t,d));return r.map(function(e,t){var n=t===Math.floor(r.length/2),c=l[e];return a.a.createElement($,{key:e,item:le(c),onAdd:function(){return m(c)},customClasses:n?"":"element-card-small",hideButtons:!n})})}}(),a.a.createElement(o,{icon:"keyboard_arrow_right",onClick:v,shadow:!0})))}),me=window.innerWidth<=768?1:3,fe=Object(r.memo)(Object(c.b)(function(e){return e.selectorState},function(e){return Object(s.b)({getAvailableWorkflowElements:ce,addWorkflowElement:oe},e)})(function(e){var t=e.availableWorkflowElements,n=e.addWorkflowElement,c=e.getAvailableWorkflowElements;return Object(r.useEffect)(function(){c()},[]),a.a.createElement("div",{id:"selector",className:"container-fluid w-100 shadow p-4 mb-2"},a.a.createElement("div",{className:"row"},a.a.createElement(de,{itemsVisibleCount:me,items:t,onAdd:n,infinite:!0})))})),ve=n(9),we=n.n(ve);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var pe=n(18),Ee={request:{status:null,error:null},selectedWorkflowElements:[],workflowId:null};var he={request:{status:null,error:null},availableWorkflowElements:[]};var be={workflowState:Ee,selectorState:he},ge=Object(s.d)(Object(s.c)({workflowState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case b:return Object.assign({},e,{selectedWorkflowElements:e.selectedWorkflowElements.concat(r),workflowId:""});case g:return Object.assign({},e,{selectedWorkflowElements:e.selectedWorkflowElements.filter(function(e,t){return t!==r}),workflowId:""});case E:return Object.assign({},e,{request:{status:r.status,error:r.error},selectedWorkflowElements:e.selectedWorkflowElements.map(function(e,t){return t===r.data.index&&(e.config.result=r.data.result,e.config.isValid=r.data.isValid),e})});case p:case h:case O:case j:return Object.assign({},e,{request:{status:r.status,error:r.error}});case k:return Object.assign({},e,{request:{status:r.status,error:r.error},workflowId:r.data.id});default:return e}},selectorState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case f:return Object.assign({},e,{request:{status:r.status,error:""}});case v:return Object.assign({},e,{request:{status:r.status,error:""},availableWorkflowElements:r.data});case w:return Object.assign({},e,{request:{status:r.status,error:r.error}});default:return e}}}),be,Object(s.a)(pe.a));n(35),n(36);we.a.render(a.a.createElement(c.a,{store:ge},a.a.createElement(function(){return a.a.createElement("div",null,a.a.createElement(fe,null),a.a.createElement(Q,null))},null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[22,1,2]]]);
//# sourceMappingURL=main.e965dd33.chunk.js.map