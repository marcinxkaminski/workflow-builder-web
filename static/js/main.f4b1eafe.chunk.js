(this["webpackJsonpworkflow-builder-web"]=this["webpackJsonpworkflow-builder-web"]||[]).push([[0],{16:function(e,t,n){e.exports=n(29)},28:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(6),c=n(7),l=n.n(c),s=n(3),i=function(e){var t=function(e){var t=e.onClick,n=e.disabled,a={};return t&&(a.onClick=t),n&&(a.disabled=n),a}(e),n=e.shadow,a=e.customClasses,o=e.loading,c=e.icon;return r.a.createElement("button",Object.assign({type:"button"},t,{className:"".concat("btn btn-outline-light btn-circle").concat(n?" shadow":"").concat(a?" ".concat(a):"")}),o?r.a.createElement("div",{className:"loader spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")):function(e){return r.a.createElement("i",{className:"material-icons"},e||"help")}(c))};i.defaultProps={shadow:"help",customClasses:null,loading:null,icon:"help"};var u=Object(a.memo)(i),d=n(1),m=n.n(d),f="SUCCESS",v="ERROR",w="GET_AVAILABLE_WORKFLOW_ELEMENTS",E="GET_AVAILABLE_WORKFLOW_ELEMENTS_".concat(f),h="GET_AVAILABLE_WORKFLOW_ELEMENTS_".concat(v),p="GET_RESULTS_FOR_DATA",b="GET_RESULTS_FOR_DATA_".concat(f),g="GET_RESULTS_FOR_DATA_".concat(v),k="ADD_WORKFLOW_ELEMENT",O="DELETE_WORKFLOW_ELEMENT",y="SUBMIT_WORKFLOW",N="SUBMIT_WORKFLOW_".concat(f),j="SUBMIT_WORKFLOW_".concat(v),x="https://workflow-builder-api.herokuapp.com/api/workflow-builder",W="/elements",_="/files",S=n(2);function C(e){var t,n,a,r,o,c=arguments;return m.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t=c.length>1&&void 0!==c[1]?c[1]:{},n=c.length>2&&void 0!==c[2]?c[2]:{},a=c.length>3&&void 0!==c[3]?c[3]:"GET",r=c.length>4&&void 0!==c[4]?c[4]:{},l.next=6,m.a.awrap(fetch(e,Object(S.a)({mode:"cors"},t,{headers:Object(S.a)({"Content-Type":"application/json"},n),method:a,body:"GET"===a||"HEAD"===a?null:JSON.stringify(r)})));case 6:return o=l.sent,l.abrupt("return",o.ok?o.json():o.text());case 8:case"end":return l.stop()}}))}function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return"".concat(e).concat(t).concat(n?"?".concat(new URLSearchParams(n).toString()):"/")}var T={},L={};function I(e){var t,n,a,r=arguments;return m.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return t=r.length>1&&void 0!==r[1]?r[1]:null,n=r.length>2&&void 0!==r[2]?r[2]:T,a=r.length>3&&void 0!==r[3]?r[3]:L,o.abrupt("return",C(A(x,e,t),n,a,"GET"));case 4:case"end":return o.stop()}}))}function R(e){var t,n,a,r,o=arguments;return m.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:{},n=o.length>2&&void 0!==o[2]?o[2]:null,a=o.length>3&&void 0!==o[3]?o[3]:T,r=o.length>4&&void 0!==o[4]?o[4]:L,c.abrupt("return",C(A(x,e,n),a,r,"PUT",t));case 5:case"end":return c.stop()}}))}function D(e){var t,n,a,r,o=arguments;return m.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:{},n=o.length>2&&void 0!==o[2]?o[2]:null,a=o.length>3&&void 0!==o[3]?o[3]:T,r=o.length>4&&void 0!==o[4]?o[4]:L,c.abrupt("return",C(A(x,e,n),a,r,"POST",t));case 5:case"end":return c.stop()}}))}var B="PENDING",F="SUCCESS",M="ERROR";function V(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(a){var r;return m.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,a({type:e,payload:{status:B}}),o.next=4,m.a.awrap(n?t(n):t());case 4:return r=o.sent,a({type:"".concat(e,"_").concat(f),payload:{status:F,data:r}}),o.abrupt("return",r);case 9:return o.prev=9,o.t0=o.catch(0),console.error(o.t0),a({type:"".concat(e,"_").concat(v),payload:{status:M,error:o.t0}}),o.abrupt("return",null);case 14:case"end":return o.stop()}}),null,null,[[0,9]])}}function G(e){console.warn("Cannot open ".concat(e," in the new tab."))}function U(e){if(!e)return G(e);var t=window.open(e,"_blank");return t&&t.focus?t.focus():G(e)}function q(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return{id:e.id}}))}function P(e,t){try{var n=JSON.parse(e),a=Object.values(n).filter((function(e){return!e})).length;return!Object.keys(t.data).filter((function(e){return!Object.keys(n).includes(e)})).length&&!a}catch(r){return console.warn(r),!1}}function K(e){return{type:O,payload:e.index}}function J(e){var t,n,a,r;return m.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.data,n=e.item,a=null,!(r=P(t,n.config))){o.next=7;break}return o.next=6,m.a.awrap(R(W,{id:n.id,data:JSON.parse(t)}));case 6:a=o.sent;case 7:return o.abrupt("return",{index:n.index,result:a,isValid:r});case 8:case"end":return o.stop()}}))}function H(e,t){return V(p,J,{data:t,item:e})}function $(e){var t,n,a;return m.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.elements,r.next=3,m.a.awrap(D(W,{elements:t}));case 3:return n=r.sent,a=n.id,r.abrupt("return",a);case 6:case"end":return r.stop()}}))}function z(){return function(e,t){var n,a,r,o,c;return m.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(n=t().workflowState,a=n.selectedWorkflowElements,r=n.workflowId,o=r){l.next=7;break}return c=q(a),l.next=6,m.a.awrap(e(V(y,$,{elements:c})));case 6:o=l.sent;case 7:U(A(x,_,{id:o}));case 8:case"end":return l.stop()}}))}}var Q=function(e){var t,n,a,o,c=e.item,l=e.customClasses,s=e.hideButtons,i=e.onAdd,d=e.onDelete,m=e.onChange;return c&&Object.keys(c).length?r.a.createElement("div",{className:"card element-card shadow text-center m-2 ".concat(l)},r.a.createElement("div",{className:"card-body"},"undefined"!==typeof c.index?(o=c.index,r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col text-center"},r.a.createElement("h6",null,"#".concat(o+1))))):null,c.name?(a=c.name,r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col text-center"},r.a.createElement("h4",{className:"card-title"},a)))):null,c.materialIcon?(n=c.materialIcon,r.a.createElement("div",{className:"row justify-content-center my-2"},r.a.createElement("div",{className:"col text-center"},r.a.createElement("div",{className:"card-subtitle"},r.a.createElement("i",{className:"material-icons"},n))))):null,c.description?(t=c.description,r.a.createElement("div",{className:"row justify-content-center mb-3"},r.a.createElement("div",{className:"col text-center"},r.a.createElement("div",{className:"card-text"},r.a.createElement("small",{className:"text-muted"},t))))):null,!i||s||d?null:function(e){return r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col text-center"},r.a.createElement(u,{icon:"add",customClasses:"btn-outline-dark mx-auto",shadow:!1,onClick:e})))}(i),!d||s||i?null:function(e){return r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col text-center"},r.a.createElement(u,{icon:"clear",customClasses:"btn-outline-dark mx-auto",shadow:!1,onClick:e})))}(d)),Object.keys(c.config||{}).length&&m?function(e,t){return r.a.createElement("div",{className:"card-footer overflow-auto p-0 small font-weight-light"},r.a.createElement("textarea",{className:"smallest form-control".concat(!1===e.isValid?" is-invalid":""),defaultValue:JSON.stringify(e.data),onBlur:function(e){var n=e.target;return t(n.value)}}),r.a.createElement("small",{className:"text-muted small"},"Result:",r.a.createElement("br",null)," ",e.result?JSON.stringify(e.result):null))}(c.config,m):null):(console.warn("Cannot render empty item ",c),null)};Q.defaultProps={item:{},onAdd:null,onDelete:null,onChange:null,hideButtons:!1,customClasses:""};var X=Object(a.memo)(Q),Y=Object(a.memo)((function(e){var t=e.items,n=e.onDelete,a=e.onConfigChange;return r.a.createElement("div",{className:"row w-100 mx-auto justify-content-center align-items-center my-5"},t.map((function(e,t){var o=function(e,t){return{id:e.id,name:e.name,config:e.config,index:t}}(e,t);return r.a.createElement(X,{key:e.id+Math.random(),item:o,onDelete:function(){return n(o)},onChange:function(e){return a(o,e)}})})))})),Z=Object(a.memo)(Object(o.b)((function(e){return e.workflowState}),(function(e){return Object(s.b)({deleteWorkflowElement:K,submitWorkflow:z,onlineProcessing:H},e)}))((function(e){var t=e.selectedWorkflowElements,n=e.deleteWorkflowElement,a=e.submitWorkflow,o=e.onlineProcessing,c=e.request;return r.a.createElement("div",{className:"container-fluid my-2"},r.a.createElement(Y,{items:t,onDelete:n,onConfigChange:o}),r.a.createElement("div",{className:"row justify-content-center my-4"},r.a.createElement("div",{className:"col text-center mb-5"},r.a.createElement(u,{icon:"cloud_download",loading:c.status===B,customClasses:"mx-auto",onClick:a,shadow:!0}))))}))),ee=n(13);function te(e){this.name="WorkflowElementError",this.message=e}var ne=function e(t){var n=t.id,a=t.name,r=t.description,o=void 0===r?null:r,c=t.materialIcon,l=void 0===c?null:c,s=t.config,i=void 0===s?null:s;if(Object(ee.a)(this,e),!n)throw new te("Invalid workflow element's ID");if(!a)throw new te("Invalid workflow element's name");this.id=n,this.name=a,this.description=o,this.materialIcon=l,this.config=i},ae=function(){var e,t;return m.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,m.a.awrap(I(W));case 2:return e=n.sent,t=e.elements,n.abrupt("return",t.map((function(e){return new ne(e)})));case 5:case"end":return n.stop()}}))};function re(){return V(w,ae)}function oe(e){return{type:k,payload:Object(S.a)({},e)}}var ce=n(15),le=function(e){return{name:e.name,materialIcon:e.materialIcon,description:e.description}},se=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e<t-1?e+1:n?(e+1)%t:e},ie=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e>0?e-1:n?t-1:e},ue=function(e){var t=Object(a.useState)(0),n=Object(ce.a)(t,2),o=n[0],c=n[1],l=e.items,s=void 0===l?[]:l,i=e.infinite,d=void 0===i||i,f=e.onAdd,v=void 0===f?null:f,w=e.itemsVisibleCount,E=void 0===w?1:w;if(!s.length||!v)return null;return r.a.createElement("div",{className:"container-fluid w-100"},r.a.createElement("div",{className:"row justify-content-between align-items-center"},r.a.createElement(u,{icon:"keyboard_arrow_left",onClick:function(){return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:c(ie(o,s.length,d));case 1:case"end":return e.stop()}}))},shadow:!0}),function(){var e=E,t=s.length;if(1===e||e>t){var n=s[o];return r.a.createElement(X,{item:le(n),onAdd:function(){return v(n)},customClasses:"mx-auto"})}var a=[ie(o,t,d)];return new Array(e-1).fill(e).forEach((function(){a.push(se(a[a.length-1],t,d))})),a.map((function(e,t){var n=t===Math.floor(a.length/2),o=s[e];return r.a.createElement(X,{key:o.id+e+Math.random(),item:le(o),onAdd:function(){return v(o)},customClasses:n?"":"element-card-small",hideButtons:!n})}))}(),r.a.createElement(u,{icon:"keyboard_arrow_right",onClick:function(){return m.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:c(se(o,s.length,d));case 1:case"end":return e.stop()}}))},shadow:!0})))};ue.defaultProps={items:[],infinite:!0,itemsVisibleCount:1,onAdd:null};var de=Object(a.memo)(ue),me=function(){return window.innerWidth<=768?1:3},fe=Object(a.memo)(Object(o.b)((function(e){return e.selectorState}),(function(e){return Object(s.b)({getAvailableWorkflowElements:re,addWorkflowElement:oe},e)}))((function(e){var t=e.availableWorkflowElements,n=e.addWorkflowElement,o=e.getAvailableWorkflowElements;return Object(a.useEffect)((function(){o()}),[]),r.a.createElement("div",{id:"selector",className:"container-fluid w-100 shadow p-4 mb-2"},r.a.createElement("div",{className:"row"},r.a.createElement(de,{itemsVisibleCount:me(),items:t,onAdd:n,infinite:!0})))})));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ve=n(14),we={request:{status:null,error:null},selectedWorkflowElements:[],workflowId:null};var Ee={request:{status:null,error:null},availableWorkflowElements:[]};var he={workflowState:we,selectorState:Ee},pe=Object(s.d)(Object(s.c)({workflowState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case k:return Object(S.a)({},e,{selectedWorkflowElements:e.selectedWorkflowElements.concat(a),workflowId:null});case O:return Object(S.a)({},e,{selectedWorkflowElements:e.selectedWorkflowElements.filter((function(e,t){return t!==a})),workflowId:null});case b:return Object(S.a)({},e,{request:{status:a.status,error:a.error},selectedWorkflowElements:e.selectedWorkflowElements.map((function(e,t){return t===a.data.index&&e.config&&(e.config.result=a.data.result,e.config.isValid=a.data.isValid),e}))});case p:case g:case y:case j:return Object(S.a)({},e,{request:{status:a.status,error:a.error}});case N:return Object(S.a)({},e,{request:{status:a.status,error:a.error},workflowId:a.data.id});default:return e}},selectorState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case w:return Object(S.a)({},e,{request:{status:a.status,error:null}});case E:return Object(S.a)({},e,{request:{status:a.status,error:null},availableWorkflowElements:a.data});case h:return Object(S.a)({},e,{request:{status:a.status,error:a.error}});default:return e}}}),he,Object(s.a)(ve.a));n(27),n(28);l.a.render(r.a.createElement(o.a,{store:pe},r.a.createElement((function(){return r.a.createElement("div",null,r.a.createElement(fe,null),r.a.createElement(Z,null))}),null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[16,1,2]]]);
//# sourceMappingURL=main.f4b1eafe.chunk.js.map